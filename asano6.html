<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æœã®ä¼šã‚¢ãƒ—ãƒª - æ¡œãŒä¸˜ ç™ºè¡¨å¼·åŒ–ç‰ˆ</title>
  <style>
    :root {
      --bg-color: #f7f9fc;
      --tab-1: #ffb7b2; --tab-2: #ffdac1; --tab-3: #fff9c4;
      --tab-4: #e2f0cb; --tab-5: #b5ead7; --tab-6: #c7ceea;
    }

    body {
      font-family: 'Yu Gothic', 'Hiragino Kaku Gothic ProN', sans-serif;
      background-color: var(--bg-color);
      margin: 0; display: flex; height: 100vh; overflow: hidden;
    }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
    .sidebar { width: 100px; display: flex; flex-direction: column; height: 100%; }
    .tab {
      flex: 1; display: flex; align-items: center; justify-content: center;
      cursor: pointer; writing-mode: vertical-rl; text-orientation: upright;
      font-weight: bold; font-size: 1.1rem; border: 1px solid rgba(0,0,0,0.05);
      transition: all 0.2s; opacity: 0.7;
    }
    .tab.active { width: 125px; opacity: 1; z-index: 10; font-size: 1.2rem; }
    .sidebar-left .tab.active { border-radius: 0 20px 20px 0; box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
    .sidebar-right .tab.active { border-radius: 20px 0 0 20px; box-shadow: -5px 0 15px rgba(0,0,0,0.1); }

    /* ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ */
    .main-container {
      flex: 1; background: white; margin: 15px; border-radius: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      padding: 30px; text-align: center; position: relative;
    }

    .page { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; }
    .page.active { display: flex; animation: fadeIn 0.4s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* ãƒœã‚¿ãƒ³ */
    .action-btn {
      padding: 20px 40px; font-size: 2rem; font-weight: bold; color: white;
      border: none; border-radius: 60px; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.15);
      margin: 10px; transition: all 0.1s; width: 80%; max-width: 500px;
    }
    .action-btn:active { transform: scale(0.98); }

    .btn-greet { background: linear-gradient(135deg, #ff9a9e, #fecfef); }
    .btn-song { background-color: #ff7f50; box-shadow: 0 10px 0 #d35400; }
    .btn-yobina { background-color: #2ecc71; box-shadow: 0 10px 0 #27ae60; padding: 40px; font-size: 3rem; }
    .btn-weather { background: linear-gradient(135deg, #a1c4fd, #c2e9fb); color: #333; }
    .btn-schedule { background: linear-gradient(135deg, #84fab0, #8fd3f4); color: #2d5a27; }
    .btn-lunch { background: linear-gradient(135deg, #f5576c, #f093fb); }

    /* è¡¨ç¤ºã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .date-text { font-size: 3rem; font-weight: bold; margin-bottom: 10px; }
    .weather-box { background: #fdfcf0; border-radius: 30px; padding: 20px; width: 85%; margin-bottom: 15px; border: 2px solid #fee1a0; }
    
    .grid-container { 
      display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
      gap: 15px; width: 95%; max-height: 55%; overflow-y: auto; padding: 10px; margin-bottom: 10px;
    }
    .card { 
      background: #f9f9f9; padding: 20px; border-radius: 20px; font-size: 1.6rem; 
      font-weight: bold; border: 5px solid #eee; transition: all 0.3s;
    }
    .card.speaking { 
      background: #fff9c4; border-color: #ffeb3b; transform: scale(1.05); 
      box-shadow: 0 0 20px rgba(255,235,59,0.5);
    }
    .card.done { background: #e2f0cb; border-color: #b5ead7; opacity: 0.8; }

    .menu-box { background: #fff5f8; border-radius: 25px; padding: 25px; width: 85%; min-height: 200px; margin-bottom: 15px; }
    .menu-item { 
      font-size: 1.8rem; margin: 10px 0; text-align: left; padding-left: 15%; color: #444;
      animation: slideIn 0.5s ease-out forwards;
    }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
  </style>
</head>
<body>

  <audio id="audioSong" src="music.mp3"></audio>
  <audio id="audioYobina" src="å‘¼å.mp3"></audio>

  <div class="sidebar sidebar-left">
    <div class="tab tab-t-1" style="background-color: var(--tab-1)" onclick="showPage(1)">1.ã‚ã„ã•ã¤</div>
    <div class="tab tab-t-2" style="background-color: var(--tab-2)" onclick="showPage(2)">2.å‘¼å</div>
    <div class="tab tab-t-3" style="background-color: var(--tab-3)" onclick="showPage(3)">3.æ—¥ä»˜å¤©æ°—</div>
    <div class="tab tab-t-4" style="background-color: var(--tab-4)" onclick="showPage(4)">4.äºˆå®š</div>
    <div class="tab tab-t-5" style="background-color: var(--tab-5)" onclick="showPage(5)">5.çµ¦é£Ÿ</div>
    <div class="tab tab-t-6" style="background-color: var(--tab-6)" onclick="showPage(6)">6.ãŠã‚ã‚Š</div>
  </div>

  <div class="main-container">
    
    <div class="page" id="page1">
      <button class="action-btn btn-greet" onclick="speak('ã“ã‚Œã‹ã‚‰æœã®ä¼šã‚’å§‹ã‚ã¾ã™ã€‚æ°—ã‚’ã¤ã‘ã€‚ã‚Œã„ï¼')">ã¯ã˜ã¾ã‚Šã®æŒ¨æ‹¶</button>
      <button class="action-btn btn-song" onclick="playSong()">â˜€ï¸ æœã®æ­Œ</button>
    </div>

    <div class="page" id="page2">
      <button class="action-btn btn-yobina" onclick="playYobina()">ğŸ“¢ å‘¼å (BGM)</button>
    </div>

    <div class="page" id="page3">
      <div id="dateDisplay" class="date-text"></div>
      <div class="weather-box">
        <div id="weatherContent">
          <div id="weatherIcon" style="font-size: 80px;">â˜ï¸</div>
          <div id="weatherLabel" style="font-size: 1.8rem; font-weight: bold;">èª­è¾¼ä¸­...</div>
          <div id="weatherTemp" style="font-size: 1.4rem;"></div>
        </div>
      </div>
      <button class="action-btn btn-weather" onclick="speakWeather()">æ—¥ä»˜ã¨å¤©æ°—ã‚’ç™ºè¡¨</button>
    </div>

    <div class="page" id="page4">
      <h2 style="color: #4cbb6e; margin: 0;">ãã‚‡ã†ã®ã‚ˆã¦ã„</h2>
      <div class="grid-container" id="scheduleList"></div>
      <button class="action-btn btn-schedule" id="btnRevealSchedule" onclick="revealSchedule()">äºˆå®šã‚’ç™ºè¡¨ã™ã‚‹</button>
    </div>

    <div class="page" id="page5">
      <h2 style="color: #f5576c; margin: 0;">ğŸ´ ãã‚‡ã†ã®ãã‚…ã†ã—ã‚‡ã ğŸ´</h2>
      <div id="menuContent" class="menu-box">
        <div style="color: #999; margin-top: 60px; font-size: 1.5rem;">ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­</div>
      </div>
      <button class="action-btn btn-lunch" id="btnRevealLunch" onclick="revealLunch()">çµ¦é£Ÿã‚’ç™ºè¡¨ï¼</button>
    </div>

    <div class="page" id="page6">
      <button class="action-btn btn-greet" onclick="speak('ã“ã‚Œã§æœã®ä¼šã‚’çµ‚ã‚ã‚Šã¾ã™ã€‚æ°—ã‚’ã¤ã‘ã€‚ã‚Œã„ï¼')">ãŠã‚ã‚Šã®æŒ¨æ‹¶</button>
    </div>

  </div>

  <div class="sidebar sidebar-right">
    <div class="tab tab-t-1" style="background-color: var(--tab-1)" onclick="showPage(1)">1.ã‚ã„ã•ã¤</div>
    <div class="tab tab-t-2" style="background-color: var(--tab-2)" onclick="showPage(2)">2.å‘¼å</div>
    <div class="tab tab-t-3" style="background-color: var(--tab-3)" onclick="showPage(3)">3.æ—¥ä»˜å¤©æ°—</div>
    <div class="tab tab-t-4" style="background-color: var(--tab-4)" onclick="showPage(4)">4.äºˆå®š</div>
    <div class="tab tab-t-5" style="background-color: var(--tab-5)" onclick="showPage(5)">5.çµ¦é£Ÿ</div>
    <div class="tab tab-t-6" style="background-color: var(--tab-6)" onclick="showPage(6)">6.ãŠã‚ã‚Š</div>
  </div>

  <script>
    const SCHEDULE_DB = {
      "2026-02-24": [{s:"æœã®ä¼š",i:"ğŸŒ…"},{s:"èª²é¡Œå­¦ç¿’",i:"âœï¸"},{s:"ç”Ÿæ´»å˜å…ƒå­¦ç¿’",i:"ğŸ’"},{s:"èº«ä½“ã®å‹•ã",i:"ğŸ¤¸"},{s:"çµ¦é£Ÿ",i:"ğŸ±"},{s:"åˆå¾Œã®ãŠå‹‰å¼·",i:"ğŸ“–"}],
      "2026-02-25": [{s:"æœã®ä¼š",i:"ğŸŒ…"},{s:"éŸ³æ¥½",i:"ğŸµ"},{s:"å›³å·¥",i:"ğŸ¨"},{s:"ç”Ÿæ´»å˜å…ƒå­¦ç¿’",i:"ğŸ’"},{s:"çµ¦é£Ÿ",i:"ğŸ±"},{s:"åˆå¾Œã®ãŠå‹‰å¼·",i:"ğŸ“–"}],
      "2026-02-26": [{s:"æœã®ä¼š",i:"ğŸŒ…"},{s:"èº«ä½“ã®å‹•ã",i:"ğŸ¤¸"},{s:"ç”Ÿæ´»å˜å…ƒå­¦ç¿’",i:"ğŸ’"},{s:"çµ¦é£Ÿ",i:"ğŸ±"},{s:"åˆå¾Œã®ãŠå‹‰å¼·",i:"ğŸ“–"}],
      "2026-02-27": [{s:"æœã®ä¼š",i:"ğŸŒ…"},{s:"å­¦å¹´é›†ä¼š",i:"ğŸ‘¥"},{s:"å›³å·¥",i:"ğŸ¨"},{s:"çµ¦é£Ÿ",i:"ğŸ±"},{s:"åˆå¾Œã®ãŠå‹‰å¼·",i:"ğŸ“–"}]
    };

    const MENU_DB = {
      24: { m: ['ã”ã¯ã‚“', 'ãƒãƒ ã‚«ãƒ„', 'è’¸ã—é‡èœæ·»ãˆ', 'æ˜¥é›¨ã‚µãƒ©ãƒ€', 'è±šæ±', 'ã‚Šã‚“ã”'], milk: true },
      25: { m: ['é£Ÿãƒ‘ãƒ³', 'ãƒ¬ãƒ¼ã‚ºãƒ³ã‚¯ãƒªãƒ¼ãƒ ', 'é±ˆã®ãƒ›ã‚¤ãƒ«ç„¼ã', 'é‡èœç‚’ã‚', 'ã˜ã‚ƒãŒã„ã‚‚ã®ã‚³ãƒ³ã‚½ãƒ¡ç…®', 'è±†è…ã®ã‚¹ãƒ¼ãƒ—', 'ã‚ªãƒ¬ãƒ³ã‚¸'], milk: true },
      26: { m: ['ãƒãƒ£ãƒ¼ãƒãƒ³', 'ã‚ã‚“ã‹ã‘ã‚«ãƒƒãƒ—ç„¼å£²', 'é‡èœç‚’ã‚', 'ã‚¹ãƒ¼ãƒ—', 'ãƒŸãƒƒã‚¯ã‚¹ãƒ™ãƒªãƒ¼ã‚¼ãƒªãƒ¼'], milk: true },
      27: { m: ['ã”ã¯ã‚“', 'é®­ã®ç„¼ãæ¼¬ã‘', 'è»Šéº©ã®æšã’ç…®', 'ã®ã£ãº', 'é¶æ±', 'ã„ã‚‚ã‚‚ã¡'], milk: true }
    };

    let currentPage = 1;
    let weatherSpeech = "";

    window.onload = () => {
      initDate();
      fetchWeather();
      renderScheduleStatic();
      showPage(1);
    };

    function getTodayStr() {
      const n = new Date();
      return `${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,'0')}-${String(n.getDate()).padStart(2,'0')}`;
    }

    function initDate() {
      const now = new Date();
      const days = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
      document.getElementById('dateDisplay').innerText = `${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ (${days[now.getDay()]})`;
    }

    function showPage(num) {
      currentPage = num;
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('page' + num).classList.add('active');
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-t-' + num).forEach(t => t.classList.add('active'));
      window.speechSynthesis.cancel();
    }

    /* äºˆå®šã®åˆ¶å¾¡ */
    function renderScheduleStatic() {
      const today = getTodayStr();
      const items = SCHEDULE_DB[today] || [{s:"å…ˆç”Ÿã«èã„ã¦ã­", i:"ğŸ "}];
      const container = document.getElementById('scheduleList');
      container.innerHTML = "";
      items.forEach((item, idx) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.id = `sch-card-${idx}`;
        card.innerHTML = `<span style="font-size:2rem">${item.i}</span><br>${item.s}`;
        container.appendChild(card);
      });
    }

    async function revealSchedule() {
      const btn = document.getElementById('btnRevealSchedule');
      btn.disabled = true;
      const today = getTodayStr();
      const items = SCHEDULE_DB[today];
      if (!items) { speak("äºˆå®šãŒã‚ã‚Šã¾ã›ã‚“"); return; }

      speak("ä»Šæ—¥ã®äºˆå®šã‚’ç™ºè¡¨ã—ã¾ã™ã€‚");
      await new Promise(r => setTimeout(r, 2000));

      for (let i = 0; i < items.length; i++) {
        const card = document.getElementById(`sch-card-${i}`);
        card.classList.add('speaking');
        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
        await speakPromise(items[i].s + "ã€‚");
        card.classList.remove('speaking');
        card.classList.add('done');
      }
      speak("ä»¥ä¸Šã®é †ç•ªã§ã™ã€‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼");
      btn.disabled = false;
    }

    /* çµ¦é£Ÿã®åˆ¶å¾¡ */
    async function revealLunch() {
      const btn = document.getElementById('btnRevealLunch');
      btn.disabled = true;
      const day = new Date().getDate();
      const data = MENU_DB[day];
      const container = document.getElementById('menuContent');
      container.innerHTML = "";

      if (!data) { speak("ä»Šæ—¥ã®çµ¦é£Ÿã¯ãŠä¼‘ã¿ã§ã™ã€‚"); return; }

      speak("ä»Šæ—¥ã®çµ¦é£Ÿã‚’ç™ºè¡¨ã—ã¾ã™ï¼");
      await new Promise(r => setTimeout(r, 2000));

      for (const item of data.m) {
        const div = document.createElement('div');
        div.className = 'menu-item';
        div.innerHTML = `âœ¨ ${item}`;
        container.appendChild(div);
        await speakPromise(item);
      }
      
      if (data.milk) {
        const milkDiv = document.createElement('div');
        milkDiv.className = 'menu-item';
        milkDiv.style.color = "blue";
        milkDiv.innerHTML = `ğŸ¥› ç‰›ä¹³`;
        container.appendChild(milkDiv);
        await speakPromise("ãã‚Œã‹ã‚‰ã€ç‰›ä¹³ã§ã™ã€‚");
      }
      speak("æ®‹ã•ãšé£Ÿã¹ã¾ã—ã‚‡ã†ï¼");
      btn.disabled = false;
    }

    /* å¤©æ°— */
    async function fetchWeather() {
      try {
        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=35.6186&longitude=140.1554&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Asia%2FTokyo`);
        const data = await res.json();
        const code = data.daily.weathercode[0];
        const tMax = Math.round(data.daily.temperature_2m_max[0]);
        const tMin = Math.round(data.daily.temperature_2m_min[0]);
        const label = code < 3 ? "æ™´ã‚Œ" : "ãã‚‚ã‚Š";
        document.getElementById('weatherLabel').innerText = label;
        document.getElementById('weatherTemp').innerText = `æœ€é«˜ ${tMax}åº¦ / æœ€ä½ ${tMin}åº¦`;
        weatherSpeech = `ä»Šæ—¥ã®å¤©æ°—ã¯${label}ã€‚æœ€é«˜æ°—æ¸©${tMax}åº¦ã€æœ€ä½æ°—æ¸©ã¯${tMin}åº¦ã§ã™ã€‚`;
      } catch (e) { document.getElementById('weatherLabel').innerText = "å–å¾—å¤±æ•—"; }
    }

    function speakWeather() { speak(document.getElementById('dateDisplay').innerText + weatherSpeech); }

    /* éŸ³å£°å…±é€š */
    function speakPromise(text) {
      return new Promise((resolve) => {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'ja-JP';
        u.onend = () => resolve();
        window.speechSynthesis.speak(u);
      });
    }

    function speak(text) {
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'ja-JP';
      window.speechSynthesis.speak(u);
    }

    function playSong() { const a = document.getElementById('audioSong'); a.currentTime = 0; a.play(); }
    function playYobina() { const a = document.getElementById('audioYobina'); a.currentTime = 0; a.play(); }

    window.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'p') {
        if (currentPage === 1) playSong();
        if (currentPage === 2) playYobina();
        if (currentPage === 3) speakWeather();
        if (currentPage === 4) revealSchedule();
        if (currentPage === 5) revealLunch();
        if (currentPage === 6) speak('ã“ã‚Œã§çµ‚ã‚ã‚Šã¾ã™ã€‚ã‚Œã„ï¼');
      }
    });
  </script>
</body>
</html>
